let instantload,InstantLoad=instantload=function(){let e=false,t=[],o=null;const n=[],r={preload:[],postload:[],change:[],init:[]},l={},a={bar:{startLoading:()=>{},endLoading:()=>{}},blink:{startLoading:()=>{},endLoading:()=>{}},circle:{startLoading:()=>{},endLoading:()=>{}},invisible:{startLoading:()=>{},endLoading:()=>{}}},i={reloadPagesOnPopstate:false,loadingStyle:a.bar},d=e=>{for(let t=0;t<r[e].length;t++){r[e][t]()}},s=(e,t)=>{r[e].push(t)},c=()=>{let e=[];document.head.querySelectorAll("script").forEach(t=>{if(!t.hasAttribute("instantload-blacklist"))e.push(t)});document.body.querySelectorAll("script").forEach(t=>{if(!t.hasAttribute("instantload-blacklist"))e.push(t)});for(let t=0;t<e.length;t++){if(e[t].instantload_tracked!=true)continue;let o=document.createElement("script"),n=e[t],r=n.parentNode,l=n.nextSiblings;o.textContent=n.textContent;o.instantload_tracked=true;for(let e=0;e<n.attributes.length;e++){o.setAttribute(n.attributes[e].name,n.attributes[e].value)}n.remove();r.insertBefore(o,l)}},u=e=>{return e.split("#").join("")},f=new MutationObserver(e=>{const t=[];for(let o=0;o<e.length;o++){e[o].addedNodes.forEach(e=>{if(e.tagName!=null&&e.tagName.toLowerCase()=="a"&&L(e))t.push(e)})}if(t.legth==0)return;E();v()}),h=(e,t)=>{l[u(location.href)].scrollPos={x:window.scrollX,y:window.scrollY};o.abort();E();f.disconnect();document.documentElement.replaceChild(e.body,document.body);document.documentElement.replaceChild(e.head,document.head);c();if(t!=null){history.pushState(null,null,t);scrollTo(0,0);l[u(location.href)]={document:{head:document.head,body:document.body},scrollPos:{x:window.scrollX,y:window.scrollY}}}f.observe(document.body,{childList:true});v();d("change")},g=(e,t,n)=>{d("preload");o=new XMLHttpRequest;o.open("get",e);o.timeout=9e4;o.send();o.onload=(()=>{let e=document.implementation.createHTMLDocument("");e.documentElement.innerHTML=o.responseText;t.preloadedPage=e;d("postload");n()})},m=e=>{if(l[u(location.href)]==null){location.reload()}else{h(l[u(location.href)].document);scrollTo(l[u(location.href)].scrollPos.x,l[u(location.href)].scrollPos.y)}},p=e=>{if(e.target.isPreloaded)return;g(u(e.target.href),e.target,()=>{e.target.isPreloaded=true})},b=e=>{e.preventDefault();if(e.target.isPreloaded){e.target.isPreloaded=false;h(e.target.preloadedPage,e.target.href)}else{g(u(e.target.href),e.target,()=>{e.target.isPreloaded=true;h(e.target.preloadedPage,e.target.href)})}},y=e=>{if(e.hasAttribute("instantload-blacklist"))return true;return false},L=e=>{const t=location.protocol+"//"+location.host+"/";if(e.taget||e.href.indexOf(t)!=0||y(e))return false;return true},w=()=>{for(let e=0;e<t.length;e++){t[e].addEventListener("mouseover",p);t[e].addEventListener("click",b)}window.addEventListener("popstate",m)},v=()=>{document.querySelectorAll("a").forEach(function(e){if(L(e)){t.push(e)}});w()},P=()=>{for(let e=0;e<t.length;e++){t[e].removeEventListener("mouseover",p);t[e].removeEventListener("click",b)}},E=()=>{P();t=[]},x=()=>{if(!"pushState"in history)return false;if(location.protocol=="file:")return false;return true},k=()=>{return e},S=()=>{return i},A=t=>{if(e){console.warn("InstantLoad is already initialized.");return}e=true;if(!x()){console.error("InstantLoad is not supported in this browser or protocol!");return}if(t!=null){}v();l[u(location.href)]={document:{head:document.head,body:document.body},scrollPos:{x:window.scrollX,y:window.scrollY}};f.observe(document.body,{childList:true});d("init")};return{init:A,on:s,config:S,configOptions:{loadingStyles:a},isRunning:k,history:l}}();