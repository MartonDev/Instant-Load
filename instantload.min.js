let instantload,InstantLoad=instantload=function(){let t=false,e=[],o=null,n=null,a=null;const i=[],l={preload:[],postload:[],change:[],init:[]},r={},s={bar:{startLoading:()=>{const t=document.createElement("div");t.classList.add("bar");t.id="instantload-bar";t.loadingIncrease=setInterval(()=>{t.style.width=`calc(${t.style.width} + 20vw)`},830);n.appendChild(t)},endLoading:()=>{const t=n.querySelectorAll(".bar")[0];t.loadingIncrease=null;t.style.width="100vw";setTimeout(()=>{t.style.opacity="0";setTimeout(()=>{t.remove()},300)},170)}},blink:{startLoading:()=>{const t=document.createElement("div");t.classList.add("blink");t.id="instantload-whiteScreen";n.appendChild(t);t.style.opacity="1"},endLoading:()=>{const t=n.querySelectorAll(".blink")[0];setTimeout(()=>{t.style.opacity="0";setTimeout(()=>{t.remove()},300)},300)}},circle:{startLoading:()=>{const t=document.createElement("div"),e=document.createElement("div");t.classList.add("circle");t.id="instantload-circle";e.classList.add("spinner");e.id="instantload-circle-spinner";t.appendChild(e);n.appendChild(t);t.style.opacity="1"},endLoading:()=>{const t=n.querySelectorAll(".circle")[0];setTimeout(()=>{t.style.opacity="0";setTimeout(()=>{t.remove()},300)},450)}},invisible:{startLoading:()=>{},endLoading:()=>{}}},d={reloadPagesOnPopstate:false,loadingStyle:s.bar},c=()=>{const t=document.createElement("style");n=document.createElement("div");t.innerText=".instantload-container {position: fixed; top: 0; left: 0; width: 100vw; z-index: 1000000; overflow: hidden;} .instantload-container .bar {height: 4px; width: 0vw; background-color: #4287f5; opacity: 1; -webkit-transition: all .3s; -moz-transition: all .3s; -ms-transition: all .3s; -o-transition: all .3s; transition: all .3s;} .instantload-container .blink {width: 100vw; height: 100vh; background-color: #fff; opacity: 0; -webkit-transition: all .3s; -moz-transition: all .3s; -ms-transition: all .3s; -o-transition: all .3s; transition: all .3s;} .instantload-container .circle {position: relative; width: 100vw; height: 100vh; background-color: rgba(0, 0, 0, .5); opacity: 0; -webkit-transition: all .3s; -moz-transition: all .3s; -ms-transition: all .3s; -o-transition: all .3s; transition: all .3s;} .instantload-container .circle .spinner {position: absolute; top: 50%; left: 50%; width: 50px; height: 50px; border: 3px solid rgba(255, 255, 255, .3); border-radius: 50%; border-top-color: #fff; animation: spin .44s ease-in-out infinite; -webkit-animation: spin .44s ease-in-out infinite;} @keyframes spin {to{transform: rotate(360deg) translate(0, 0); -webkit-transform: rotate(360deg) translate(0, 0);}}@-webkit-keyframes spin {to{transform: rotate(360deg) translate(0, 0); -webkit-transform: rotate(360deg) translate(0, 0);}}}";n.classList.add("instantload-container");document.head.appendChild(t);document.body.appendChild(n)},u=(t,e)=>{for(let o=0;o<l[t].length;o++){l[t][o](e)}},p=(t,e)=>{l[t].push(e)},f=()=>{let t=[];document.head.querySelectorAll("script").forEach(e=>{if(!e.hasAttribute("instantload-blacklist"))t.push(e)});document.body.querySelectorAll("script").forEach(e=>{if(!e.hasAttribute("instantload-blacklist"))t.push(e)});for(let e=0;e<t.length;e++){if(t[e].instantload_tracked!=true)continue;let o=document.createElement("script"),n=t[e],a=n.parentNode,i=n.nextSiblings;o.textContent=n.textContent;o.instantload_tracked=true;for(let t=0;t<n.attributes.length;t++){o.setAttribute(n.attributes[t].name,n.attributes[t].value)}n.remove();a.insertBefore(o,i)}},h=t=>{return t.split("#").join("")},m=new MutationObserver(t=>{const e=[];for(let o=0;o<t.length;o++){t[o].addedNodes.forEach(t=>{if(t.tagName!=null&&t.tagName.toLowerCase()=="a"&&k(t))e.push(t)})}if(e.legth==0)return;P();T()}),g=(t,e)=>{r[h(location.href)].scrollPos={x:window.scrollX,y:window.scrollY};o.abort();P();m.disconnect();document.documentElement.replaceChild(t.body,document.body);document.documentElement.replaceChild(t.head,document.head);c();d.loadingStyle.startLoading();f();if(e!=null){history.pushState(null,null,e);scrollTo(0,0);r[h(location.href)]={document:{head:document.head,body:document.body},scrollPos:{x:window.scrollX,y:window.scrollY}}}a=location.href;m.observe(document.body,{childList:true});T();u("change",{eventType:"change",popstateEvent:e==null});d.loadingStyle.endLoading()},b=(t,e,n)=>{u("preload",{eventType:"preload"});o=new XMLHttpRequest;o.open("get",t);o.timeout=9e4;o.send();o.onload=(()=>{if(o.status!=200){u("postload",{eventType:"postload",success:false,message:`Status: ${o.status} ${o.statusText}`});return}let t=document.implementation.createHTMLDocument("");t.documentElement.innerHTML=o.responseText;e.preloadedPage=t;u("postload",{eventType:"postload",success:true,message:`Status: ${o.status} ${o.statusText}`});n()});o.ontimeout=(()=>{u("postload",{eventType:"postload",success:false,message:"Timeout"})})},y=t=>{if(h(location.href)==h(a))return;if(d.reloadPagesOnPopstate){const t=document.createElement("a");b(h(location.href),t,()=>{g(t.preloadedPage)})}else{if(r[h(location.href)]==null){location.reload()}else{g(r[h(location.href)].document);scrollTo(r[h(location.href)].scrollPos.x,r[h(location.href)].scrollPos.y)}}},v=t=>{if(t.target.isPreloaded)return;if(!k(t.target))return;b(h(t.target.href),t.target,()=>{t.target.isPreloaded=true})},w=t=>{t.preventDefault();if(t.target.isPreloaded){t.target.isPreloaded=false;g(t.target.preloadedPage,t.target.href)}else{b(h(t.target.href),t.target,()=>{t.target.isPreloaded=true;g(t.target.preloadedPage,t.target.href)})}},L=t=>{if(t.hasAttribute("instantload-blacklist"))return true;return false},k=t=>{const e=location.protocol+"//"+location.host+"/";if(t.taget||t.href.indexOf(e)!=0||L(t)||h(t.href)==h(location.href))return false;return true},E=()=>{for(let t=0;t<e.length;t++){e[t].addEventListener("mouseover",v);e[t].addEventListener("click",w)}window.addEventListener("popstate",y)},T=()=>{document.querySelectorAll("a").forEach(function(t){if(k(t)){e.push(t)}});E()},x=()=>{for(let t=0;t<e.length;t++){e[t].removeEventListener("mouseover",v);e[t].removeEventListener("click",w)}},P=()=>{x();e=[]},S=()=>{if(!"pushState"in history)return false;if(location.protocol=="file:")return false;return true},C=()=>{return t},A=()=>{return d},q=o=>{if(t){console.warn("InstantLoad is already initialized.");return}t=true;if(!S()){console.error("InstantLoad is not supported in this browser or protocol!");return}if(o!=null){for(option in o){d[option]=o[option]}}a=location.href;c();T();r[h(location.href)]={document:{head:document.head,body:document.body},scrollPos:{x:window.scrollX,y:window.scrollY}};m.observe(document.body,{childList:true});u("init",{eventType:"init",trackedElements:e})};return{init:q,on:p,config:A,configOptions:{loadingStyles:s},isRunning:C,history:r}}();